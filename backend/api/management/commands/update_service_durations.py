from django.core.management.base import BaseCommand
from backend.api.models import Service

class Command(BaseCommand):
    help = '–û–Ω–æ–≤–ª—é—î —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –ø–æ—Å–ª—É–≥ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è'

    def handle(self, *args, **options):
        # –°–ª–æ–≤–Ω–∏–∫ –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –¥–ª—è –ø–æ—Å–ª—É–≥
        service_durations = {
            # –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
            '–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–≤–∏–≥—É–Ω–∞': 30,
            '–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞': 60,
            '–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ö–æ–¥–æ–≤–æ—ó —á–∞—Å—Ç–∏–Ω–∏': 45,
            '–ö–æ–º–ø\'—é—Ç–µ—Ä–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞': 20,
            '–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –µ–ª–µ–∫—Ç—Ä–æ–æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è': 40,
            
            # –†–µ–º–æ–Ω—Ç —Ç–∞ –∑–∞–º—ñ–Ω–∞
            '–ó–∞–º—ñ–Ω–∞ –∞–º–æ—Ä—Ç–∏–∑–∞—Ç–æ—Ä—ñ–≤': 120,
            '–ó–∞–º—ñ–Ω–∞ –≥–∞–ª—å–º—ñ–≤–Ω–∏—Ö –∫–æ–ª–æ–¥–æ–∫': 90,
            '–†–µ–º–æ–Ω—Ç –≥–∞–ª—å–º—ñ–≤–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏': 150,
            '–ó–∞–º—ñ–Ω–∞ –º–∞—Å–ª–∞': 30,
            '–ó–∞–º—ñ–Ω–∞ –º–∞—Å—Ç–∏–ª–∞ –≤ –¥–≤–∏–≥—É–Ω—ñ': 45,
            '–ó–∞–º—ñ–Ω–∞ –ø–∞–ª–∏–≤–Ω–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä–∞': 60,
            '–ó–∞–º—ñ–Ω–∞ –ø–æ–≤—ñ—Ç—Ä—è–Ω–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä–∞': 20,
            '–ó–∞–º—ñ–Ω–∞ —Å–∞–ª–æ–Ω–Ω–æ–≥–æ —Ñ—ñ–ª—å—Ç—Ä–∞': 30,
            '–ö–æ–º–ø–ª–µ–∫—Å–Ω–µ –¢–û (—ñ–∑ –∑–∞–º—ñ–Ω–æ—é —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ —ñ –º–∞—Å—Ç–∏–ª–∞)': 180,
            '–ó–∞–º—ñ–Ω–∞ —Ä–µ–º–µ–Ω—è –ì–†–ú': 240,
            '–†–µ–º–æ–Ω—Ç –¥–≤–∏–≥—É–Ω–∞': 480,  # 8 –≥–æ–¥–∏–Ω
            '–†–µ–º–æ–Ω—Ç –ø—ñ–¥–≤—ñ—Å–∫–∏': 180,
            '–†–µ–º–æ–Ω—Ç –µ–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∏': 120,
            
            # –®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂
            '–ë–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –∫–æ–ª—ñ—Å': 30,
            '–ó–Ω—è—Ç—Ç—è/—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–ª–µ—Å–∞': 15,
            '–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂ (4 –∫–æ–ª–µ—Å–∞)': 120,
            '–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª—É': 30,
            
            # –ï–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∞ —Ç–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–µ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è
            '–ó–∞–º—ñ–Ω–∞ –∞–∫—É–º—É–ª—è—Ç–æ—Ä–∞': 45,
            '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏–≥–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó': 180,
            '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ñ–¥–µ–æ—Ä–µ—î—Å—Ç—Ä–∞—Ç–æ—Ä–∞': 90,
            '–ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –±–ª–æ–∫—ñ–≤': 60,
            
            # –ú–∏–π–∫–∞ —Ç–∞ –¥–æ–≥–ª—è–¥
            '–ê–≤—Ç–æ–º–∏–π–∫–∞ (–∑–æ–≤–Ω—ñ—à–Ω—è + –≤–Ω—É—Ç—Ä—ñ—à–Ω—è)': 60,
            '–ü–æ–ª—ñ—Ä—É–≤–∞–Ω–Ω—è —Ñ–∞—Ä': 120,
            '–•—ñ–º—á–∏—Å—Ç–∫–∞ —Å–∞–ª–æ–Ω—É': 240,  # 4 –≥–æ–¥–∏–Ω–∏
        }

        updated_count = 0
        
        for service in Service.objects.all():
            if service.name in service_durations:
                old_duration = service.duration_minutes
                service.duration_minutes = service_durations[service.name]
                service.save()
                self.stdout.write(
                    self.style.SUCCESS(f'‚úÖ {service.name}: {old_duration} ‚Üí {service.duration_minutes} —Ö–≤')
                )
                updated_count += 1
            else:
                self.stdout.write(
                    self.style.WARNING(f'‚ö†Ô∏è  {service.name}: –Ω–µ–º–∞—î –≤ —Å–ª–æ–≤–Ω–∏–∫—É (–∑–∞–ª–∏—à–∞—î—Ç—å—Å—è {service.duration_minutes} —Ö–≤)')
                )
        
        self.stdout.write(
            self.style.SUCCESS(f'\nüìä –û–Ω–æ–≤–ª–µ–Ω–æ {updated_count} –ø–æ—Å–ª—É–≥ –∑ {Service.objects.count()} –∑–∞–≥–∞–ª–æ–º')
        ) 